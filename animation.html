<div class="animation">
  <p align="center">
    <img id="_anim_img">
    <br>
    <button onclick="slower()">&#8211;</button>
    <input id="frame_slider" type="range" style="width:300px" name="points" min="0" max="1" step="1" value="0" onchange="set_frame(parseInt(this.value));"></input>
    <button onclick="faster()">+</button>
    <br>
    <button onclick="first_frame()"><img src="icons/first.png"></button>
    <button onclick="previous_frame()"><img src="icons/prev.png"></button>
    <button onclick="reverse_animation()"><img src="icons/reverse.png"></button>
    <button onclick="pause_animation()"><img src="icons/pause.png"></button>
    <button onclick="play_animation()"><img src="icons/play.png"></button>
    <button onclick="next_frame()"><img src="icons/next.png"></button>
    <button onclick="last_frame()"><img src="icons/last.png"></button>
  </p>
  <form align="center" action="#n" name="loopForm" class="anim_control">
    <input type="radio" name="looping" value="once"> Once </input>
    <input type="radio" name="looping" value="loop" checked> Loop </input>
    <input type="radio" name="looping" value="reflect"> Reflect </input>
  </form>
</div>

<script language="javascript">
  /*** define the variables we need ***/
  var Nframes = 100
  var frames = new Array(Nframes);
  var interval = 30;
  var count = 0;
  var direction = 0;
  var timer = null;

  /*** initialize the frames and widgets ***/
  for (var i=0; i<Nframes; i++)
  {
   frames[i] = new Image();
   frames[i].src = "frames/frame" + ("00" + (i + 1)).slice(-3) + ".png";
  }
  set_frame(count);
  document.getElementById('frame_slider').max = frames.length - 1;

  /*** functions to enable the animation ***/
  function set_frame(frame)
  {
    count = frame;
    document.getElementById('_anim_img').src = frames[count].src;
    document.getElementById('frame_slider').value = count;
  }

  function next_frame()
  {
    set_frame(Math.min(frames.length - 1, count + 1));
  }

  function previous_frame()
  {
    set_frame(Math.max(0, count - 1));
  }

  function first_frame()
  {
    set_frame(0);
  }

  function last_frame()
  {
    set_frame(frames.length - 1);
  } 

  function slower()
  {
    interval /= 0.7;
    if(direction > 0){play_animation();}
    else if(direction < 0){reverse_animation();}
  }

  function faster()
  {
    interval *= 0.7;
    if(direction > 0){play_animation();}
    else if(direction < 0){reverse_animation();}
  }

  function anim_step_forward()
  {
    count += 1;
    if(count < frames.length){
      set_frame(count);
    }else{
      if(document.loopForm.looping[1].checked){
        first_frame();
      }else if(document.loopForm.looping[2].checked){
        last_frame();
        reverse_animation();
      }else{
        pause_animation();
        last_frame();
      }
    }
  }

  function anim_step_reverse()
  {
    count -= 1;
    if(count >= 0){
      set_frame(count);
    }else{
      if(document.loopForm.looping[1].checked){
        last_frame();
      }else if(document.loopForm.looping[2].checked){
        first_frame();
        play_animation();
      }else{
        pause_animation();
        first_frame();
      }
    }
  }

  function play_animation(){
    pause_animation();
    direction = 1;
    if (!timer) timer = setInterval(anim_step_forward, interval);
  }

  function reverse_animation() {
    pause_animation();
    direction = -1;
    if (!timer) timer = setInterval(anim_step_reverse, interval);
  }

  function pause_animation() {
    direction = 0;
    if (timer){
      clearInterval(timer);
      timer = null;
    }
  }
</script>
